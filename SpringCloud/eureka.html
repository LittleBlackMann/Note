<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>eureka.html</title>

</head>

<body>

<h1 id="一注册中心">一·注册中心</h1>
<h3 id="服务的发现方式">1.服务的发现方式</h3>
<blockquote>
<p>(1)客户端发现 eureka (2)服务端发现 nginx zookeeper kubernetes</p>
</blockquote>
<h3 id="服务的调用方式">2.服务的调用方式</h3>
<blockquote>
<p>(1)REST or RPC eureka 使用的是 REST 方式</p>
</blockquote>
<h3 id="服务端代码实现">3.服务端代码实现</h3>
<p>（1）开启服务端注解</p>
<pre><code>@SpringBootApplication  
@EnableEurekaServer //开启 eureka 服务端注解
public class EurekaServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaServerApplication.class, args);
    }

}</code></pre>
<p>（2）编写配置文件</p>
<pre><code>spring:
  application:
    name: eureka  //服务名称
server:
  port: 8761 //服务端口
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:8761/eureka/ //注册地址
    fetch-registry: false 
    register-with-eureka: true //是否注册到 eureka
  server:
    enable-self-preservation: false //是否允许自己注册自己</code></pre>
<h3 id="客户端代码实现">4.客户端代码实现</h3>
<p>（1）开启注解</p>
<pre><code>@SpringBootApplication
@EnableDiscoveryClient //开启注解服务发现
public class EurekaClientApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaClientApplication.class, args);
    }
}</code></pre>
<p>（2）编写配置文件</p>
<pre><code>spring:
  application:
    name: eureka_client //服务名称
server:
  port: 8763 //服务端口
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:8761/eureka/,http://127.0.0.1:8762/eureka/ //注册到那个注册中心</code></pre>
<p>###5.eureka 的高可用 （1）配置文件 eureka server 互相注册即可</p>
<pre><code>1.server1

spring:
  application:
    name: eureka
server:
  port: 8761
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:8762/eureka/
    fetch-registry: false
    register-with-eureka: true
  server:
    enable-self-preservation: false
    
2.server2

spring:
  application:
    name: eureka
server:
  port: 8762
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:8761/eureka/
    fetch-registry: false
    register-with-eureka: true
  server:
    enable-self-preservation: false</code></pre>

</body>
</html>
